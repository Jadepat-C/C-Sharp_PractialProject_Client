<div class="container-fluid">
    <h1>Detail of {{ selectedInstance?.refNumber }}</h1>
    <div>
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a [routerLink]="['/']">Dashboard</a></li>
            <li class="breadcrumb-item active">Record Details</li>
        </ol>
    </div>
    <div class="container mb-5">
        <div *ngIf="error.length != 0">
            <div class="alert alert-danger">{{ error }}</div>
        </div>
        <div class="mb-2">
            <h4>Ref Number</h4>
            <em>{{ selectedInstance?.refNumber }}</em>
        </div>
        <div class="mb-2">
            <h4>Title</h4>
            <em>{{ selectedInstance?.titleEn }}</em>
            <em *ngIf="selectedInstance?.titleEn == null">N/A</em>
        </div>
        <div class="mb-2">
            <h4>Purpose</h4>
            <em>{{ selectedInstance?.purposeEn }}</em>
            <em *ngIf="selectedInstance?.purposeEn == null">N/A</em>
        </div>
        <hr>
        <div class="d-flex">
            <div class="mb-2 col-md-5">
                <h4>Start Date</h4>
                <em>{{ selectedInstance?.startDate | date:'MM/dd/yyyy'}}</em>
                <em *ngIf="selectedInstance?.startDate == null">N/A</em>
            </div>
            <div class="mb-2 col-md-5">
                <h4>End Date</h4>
                <em>{{ selectedInstance?.endDate | date:'MM/dd/yyyy'}}</em>
                <em *ngIf="selectedInstance?.endDate == null">N/A</em>
            </div>
        </div>
        <hr>
        <div class="d-flex">
            <div class="mb-2 col-md-5">
                <h4>Airfare</h4>
                <em>{{ selectedInstance?.airfare }}</em>
                <em *ngIf="selectedInstance?.airfare  == null">N/A</em>
            </div>
            <div class="mb-2 col-md-5">
                <h4>Other Transport</h4>
                <em>{{ selectedInstance?.otherTransport }}</em>
                <em *ngIf="selectedInstance?.otherTransport  == null">N/A</em>
            </div>
        </div>
        <div class="d-flex">
            <div class="mb-2 col-md-5">
                <h4>Lodging</h4>
                <em>{{ selectedInstance?.lodging }}</em>
                <em *ngIf="selectedInstance?.lodging == null">N/A</em>
            </div>
            <div class="mb-2 col-md-5">
                <h4>Meals</h4>
                <em>{{ selectedInstance?.meals }}</em>
                <em *ngIf="selectedInstance?.meals == null">N/A</em>
            </div>
        </div>
        <div class="mb-2">
            <h4>Other Expenses</h4>
            <em>{{ selectedInstance?.otherExpenses }}</em>
            <em *ngIf="selectedInstance?.otherExpenses == null">N/A</em>
        </div>        
        <hr>
        <div class="d-flex  mb-2">
            <h4 class="col-md-5">Total</h4>
            <div class="col-md-5">
                <em>{{ selectedInstance?.total }}</em>
                <em *ngIf="selectedInstance?.total == null">N/A</em>
            </div>    
        </div>
        <hr>
        <div>
            <button type="button" class="btn btn-primary" [routerLink]="['/edit', selectedInstance?.id]">Edit Record</button>
            <button type="button" class="btn btn-danger mx-2" (click)="open(popupModal)" data-target="#popupModal">Delete Record</button>
        </div>
    </div>
</div>

<!-- Comfrimation Modal -->
<ng-template #popupModal let-modal>
    <div class="modal-header">
        <h3 class="modal-title" id="modal-basic-title">Confirmation</h3>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
    </div>
    <div class="modal-body">
        <p>Do you want to delete this record?</p>
        <p>This action can not be undone.</p>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-outline-dark" (click)="modal.close()">Cancel</button>
        <button type="button" class="btn btn btn-danger" (click)="delete()">Delete</button>
    </div>
</ng-template>

<!-- Response Modal -->
<ng-template #responseModal let-modal>
    <div class="modal-header">
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
    </div>
    <div class="modal-body">
        <p>{{ notice }}</p>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-outline-dark" (click)="modal.close()">Close</button>
    </div>
</ng-template>
<p-toast position="bottom-right"></p-toast>